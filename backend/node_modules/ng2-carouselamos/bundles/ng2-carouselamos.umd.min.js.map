{"version":3,"sources":["ng://ng2-carouselamos/lib/ng2-carouselamos.component.ts","ng://ng2-carouselamos/lib/ng2-carouselamos.module.ts"],"names":["Ng2CarouselamosComponent","this","childIndex","amount","startPress","lastX","startAt","items","width","onSelectedItem","EventEmitter","prototype","onMousedown","e","which","clientX","onTouchdown","navigator","userAgent","indexOf","preventDefault","targetTouches","onMousemove","maxWidth","onTouchmove","onMouseup","elem","snap","onTouchup","counter","lastVal","i","length","el","children","style","currentStyle","window","getComputedStyle","offsetWidth","parseFloat","marginLeft","marginRight","emit","item","index","first","scroll","forward","qty","calcScroll","ngOnChanges","changes","isEqual","previousValue","currentValue","firstChange","ngAfterViewInit","_this","list","nativeElement","setTimeout","Component","args","selector","template","Input","Output","ViewChild","static","Ng2CarouselamosModule","NgModule","declarations","imports","CommonModule","exports"],"mappings":"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","sourcesContent":["import {\n  Component,\n  Input,\n  Output,\n  EventEmitter,\n  TemplateRef,\n  SimpleChanges,\n  ViewChild,\n  ElementRef,\n  AfterViewInit\n} from \"@angular/core\";\nimport isEqual from \"lodash.isequal\";\n\nexport interface SelectedItemInterface {\n  item: any;\n  index: number;\n  first: boolean;\n}\n\n@Component({\n  selector: \"[ng2-carouselamos]\",\n  styleUrls: [\"./ng2-carouselamos.component.scss\"],\n  templateUrl: \"./ng2-carouselamos.component.html\"\n})\n/*\n *\n * @param() startAt - index of slide to render first. Default to 0.\n * @param() items - List of items to belong in carousel\n * @param() width - Size of window(view) to show\n * @param() $prev - Template for previous button\n * @param() $next - Template for next button\n * @param() $item - Template for the item\n */\nexport class Ng2CarouselamosComponent implements AfterViewInit {\n  childIndex: number = 0;\n  amount: number = 0;\n  startPress: number = 0;\n  lastX: number = 0;\n\n  @Input()\n  startAt = 0;\n\n  @Input()\n  items: Array<any> = [];\n\n  @Input()\n  width: number = 500;\n\n  @Input()\n  $prev: TemplateRef<any>;\n\n  @Input()\n  $next: TemplateRef<any>;\n\n  @Input()\n  $item: TemplateRef<any>;\n\n  @Output()\n  onSelectedItem: EventEmitter<SelectedItemInterface> = new EventEmitter();\n\n  @ViewChild(\"list\", { static: true })\n  list: ElementRef;\n\n  onMousedown(e: MouseEvent) {\n    if (e.which === 1) {\n      this.startPress = e.clientX;\n      this.lastX = this.amount;\n    }\n  }\n  onTouchdown(e: TouchEvent) {\n    if (navigator.userAgent.indexOf(\"Android\") >= 0) e.preventDefault();\n    this.startPress = e.targetTouches[0].clientX;\n    this.lastX = this.amount;\n  }\n\n  onMousemove(e: MouseEvent, maxWidth: number) {\n    if (e.which === 1) {\n      const amount = this.lastX - (this.startPress - e.clientX);\n      if (amount > 0 || amount < -(maxWidth - this.width)) return;\n      this.amount = amount;\n    }\n  }\n  onTouchmove(e: TouchEvent, maxWidth: number) {\n    if (navigator.userAgent.indexOf(\"Android\") >= 0) e.preventDefault();\n    const amount = this.lastX - (this.startPress - e.targetTouches[0].clientX);\n    if (amount > 0 || amount < -(maxWidth - this.width)) return;\n    this.amount = amount;\n  }\n\n  onMouseup(e: MouseEvent, elem: any) {\n    if (e.which === 1) {\n      this.startPress = 0;\n      this.snap(elem);\n    }\n  }\n\n  onTouchup(e: TouchEvent, elem: any) {\n    if (navigator.userAgent.indexOf(\"Android\") >= 0) e.preventDefault();\n    this.startPress = 0;\n    this.snap(elem);\n  }\n\n  snap(elem: any) {\n    let counter = 0;\n    let lastVal = 0;\n    for (let i = 0; i < this.items.length; i++) {\n      const el = elem.children[i];\n      const style = el.currentStyle || window.getComputedStyle(el);\n      counter +=\n        el.offsetWidth +\n        (parseFloat(style.marginLeft) + parseFloat(style.marginRight));\n      if (this.amount <= lastVal && this.amount >= -counter) {\n        this.amount = -lastVal;\n        this.childIndex = i;\n        this.onSelectedItem.emit({\n          item: this.items[this.childIndex],\n          index: this.childIndex,\n          first: false\n        });\n        return;\n      }\n      lastVal = counter;\n    }\n    return counter;\n  }\n\n  scroll(forward: boolean, elem: any, qty = 1) {\n    this.childIndex += forward ? qty : -qty;\n    this.onSelectedItem.emit({\n      item: this.items[this.childIndex],\n      index: this.childIndex,\n      first: false\n    });\n    this.amount = -this.calcScroll(elem);\n  }\n\n  calcScroll(elem: any) {\n    let counter = 0;\n    for (let i = this.childIndex - 1; i >= 0; i--) {\n      const el = elem.children[i];\n      const style = el.currentStyle || window.getComputedStyle(el);\n      counter +=\n        el.offsetWidth +\n        (parseFloat(style.marginLeft) + parseFloat(style.marginRight));\n    }\n    return counter;\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (\n      changes.items &&\n      !isEqual(changes.items.previousValue, changes.items.currentValue)\n    ) {\n      if (changes.items.firstChange) {\n        this.onSelectedItem.emit({\n          item: this.items[this.childIndex],\n          index: this.childIndex,\n          first: true\n        });\n      }\n      this.amount = 0;\n    }\n  }\n\n  ngAfterViewInit() {\n    this.startPress = 1;\n    this.scroll(true, this.list.nativeElement, this.startAt);\n    setTimeout(() => (this.startPress = 0));\n  }\n}\n","import { NgModule } from \"@angular/core\";\nimport { CommonModule } from \"@angular/common\";\nimport { Ng2CarouselamosComponent } from \"./ng2-carouselamos.component\";\n\n@NgModule({\n  declarations: [Ng2CarouselamosComponent],\n  imports: [CommonModule],\n  exports: [Ng2CarouselamosComponent]\n})\nexport class Ng2CarouselamosModule {}\n"]}